<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Update Status | UrbanFix Portal</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="logo">
    <a href="/admin">ğŸ› UrbanFix Portal</a>
  </div>
  <ul>
    <li><a href="/admin">Dashboard</a></li>
    <li><a href="/assign">Assign Complaints</a></li>
    <li><a href="/update-status" class="active">Update Status</a></li>
    <li><a href="/reports">Reports</a></li>
    <li><a href="/manage-departments">Manage Departments</a></li>
  </ul>
</nav>

<!-- HEADER -->
<section class="page-header">
  <h1>Update Complaint Status</h1>
  <p>Modify status and progress of registered complaints</p>
</section>

<!-- TABLE -->
<section class="admin-section">
  <table class="admin-table">
    <thead>
      <tr>
        <th>Complaint ID</th>
        <th>Category</th>
        <th>Department</th>
        <th>Current Status</th>
        <th>Update Status</th>
        <th>Remarks</th>
        <th>Action</th>
      </tr>
    </thead>

    <tbody>
    {% for c in complaints %}
      <tr>
        <td>{{ c.complaint_id }}</td>
        <td>{{ c.category }}</td>
        <td>{{ c.assigned_department or "Not Assigned" }}</td>
        <td class="status-{{ c.status }}">{{ c.status }}</td>

        <td class="status-{{ c.status }}">{{ c.status }}</td>


        <td>
          <form method="post">
            <input type="hidden" name="complaint_id" value="{{ c.complaint_id }}">
            <select name="status" required>
              <option {{ 'selected' if c.status=='Registered' }}>Registered</option>
              <option {{ 'selected' if c.status=='Assigned' }}>Assigned</option>
              <option {{ 'selected' if c.status=='In Progress' }}>In Progress</option>
              <option {{ 'selected' if c.status=='Resolved' }}>Resolved</option>
              <option {{ 'selected' if c.status=='Closed' }}>Closed</option>
            </select>
        </td>

        <td>
            <input type="text" name="remarks" placeholder="Enter remarks">
        </td>

        <td>
            <button type="submit" class="action-btn small">Update</button>
          </form>
        </td>
      </tr>
    {% else %}
      <tr>
        <td colspan="7" style="text-align:center;">No complaints found</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</section>

<footer>
  <p>Â© 2026 UrbanFix Portal | Authorized Government Use Only | Government of India</p>
</footer>

</body>
</html>